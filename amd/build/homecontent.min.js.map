{"version":3,"file":"homecontent.min.js","sources":["../src/homecontent.js"],"sourcesContent":["define(['jquery', 'core/ajax', 'core/templates'], function($, ajax, templates) {\n    return {\n        init: function(default_learningspace) {\n            const loadContents = (learningspace = default_learningspace, type = '', page = 0, limit = 12) => {\n                $('#allcontent-loading-icon').show();\n                $('#content-container').hide();\n                var search_string =  $('.input-search').val();\n\n                ajax.call([{\n                    methodname: 'local_playlist_get_allcontents',\n                    args: {\n                        learningspace : learningspace,\n                        search : search_string,\n                        type : type,\n                    }\n                }])[0].done(function(response) {\n                    // Render the courses.\n                    templates.render('local_playlist/homecontent', { allcontents: response.contents })\n                        .done(function(html) {\n                            $('#allcontent-container').html(html).show();\n                            $('#allcontent-loading-icon').hide();\n                        });\n\n                }).fail(function(ex) {\n                    console.error(ex);\n                    $('#allcontent-loading-icon').hide(); // Hide loading icon on error\n                    $('#courses-container').show();\n                });\n            };\n            // Initial load.\n            loadContents();\n\n            // Event listener for pagination links.\n            /*\n            $(document).on('click', '#pagination-container a.page-link', function(e) {\n                e.preventDefault();\n                const page = $(this).data('page');\n                loadContents(page);\n            });\n            */\n            // search function\n            $('#btn-playlist-search').on('click', function() {\n                var learningspace_id = $('.learningspace_active').data('learningspaceid');\n                loadContents(learningspace_id);\n            });\n            $('#playlist-input-search').on('keypress', function(e) { \n                if (e.which === 13) {\n                    var learningspace_id = $('.learningspace_active').data('learningspaceid');\n                    loadContents(learningspace_id);\n                }\n            });\n\n            // filter on items\n            function applyFilter() {\n                var learningspace_id = $('.learningspace_active').data('learningspaceid');\n                \n                // Gather filter values\n                var filters = [];\n                $('.filter_check:checked').each(function() {\n                    filters.push($(this).val());\n                });\n                \n                // Convert filters to string like '1,2,3'\n                var filtersString = filters.join(',');\n            \n                loadContents(learningspace_id, filtersString);\n            }\n            $('.filter_check').on('change', applyFilter);\n            $('#apply-filter').on('click', applyFilter);\n\n            // change color when hover learning space option\n            $('.dropdown-item1').hover(\n                function() {\n                    $(this).find('.big-letter').css({'background-color': '#2eba70', 'color': 'white'});\n                }, \n                function() {\n                    $(this).find('.big-letter').css({'background-color': '', 'color': ''});\n                }\n            );\n\n            // event on selected new learning space\n            $(\".workspace_dropdown .workspaces_menu .dropdown-item1 a\").click(function() {\n                var learningspace_id = $(this).data('learningspaceid');\n                var name = $(this).find('.name').text();\n                var first_letter = $(this).find('.big-letter').text();\n                var current = $(this).closest('.workspace_dropdown');\n\n                current.find('.dropdown-toggle .name').html(name + ' <span class=\"caret\"></span>');\n                current.find('.dropdown-toggle .big-letter').html(first_letter);\n                current.find('.learningspace_active').data('learningspaceid', learningspace_id);\n                loadContents(learningspace_id);\n            });            \n            \n        }\n    };\n});\n"],"names":["define","$","ajax","templates","init","default_learningspace","loadContents","learningspace","type","show","hide","search_string","val","call","methodname","args","search","done","response","render","allcontents","contents","html","fail","ex","console","error","applyFilter","learningspace_id","data","filters","each","push","this","filtersString","join","on","e","which","hover","find","css","click","name","text","first_letter","current","closest"],"mappings":"AAAAA,oCAAO,CAAC,SAAU,YAAa,mBAAmB,SAASC,EAAGC,KAAMC,iBACzD,CACHC,KAAM,SAASC,6BACLC,aAAe,eAACC,qEAAgBF,sBAAuBG,4DAAO,GAChEP,EAAE,4BAA4BQ,OAC9BR,EAAE,sBAAsBS,WACpBC,cAAiBV,EAAE,iBAAiBW,MAExCV,KAAKW,KAAK,CAAC,CACPC,WAAY,iCACZC,KAAM,CACFR,cAAgBA,cAChBS,OAASL,cACTH,KAAOA,SAEX,GAAGS,MAAK,SAASC,UAEjBf,UAAUgB,OAAO,6BAA8B,CAAEC,YAAaF,SAASG,WAClEJ,MAAK,SAASK,MACXrB,EAAE,yBAAyBqB,KAAKA,MAAMb,OACtCR,EAAE,4BAA4BS,aAGvCa,MAAK,SAASC,IACbC,QAAQC,MAAMF,IACdvB,EAAE,4BAA4BS,OAC9BT,EAAE,sBAAsBQ,oBA2BvBkB,kBACDC,iBAAmB3B,EAAE,yBAAyB4B,KAAK,mBAGnDC,QAAU,GACd7B,EAAE,yBAAyB8B,MAAK,WAC5BD,QAAQE,KAAK/B,EAAEgC,MAAMrB,cAIrBsB,cAAgBJ,QAAQK,KAAK,KAEjC7B,aAAasB,iBAAkBM,eAnCnC5B,eAWAL,EAAE,wBAAwBmC,GAAG,SAAS,eAC9BR,iBAAmB3B,EAAE,yBAAyB4B,KAAK,mBACvDvB,aAAasB,qBAEjB3B,EAAE,0BAA0BmC,GAAG,YAAY,SAASC,MAChC,KAAZA,EAAEC,MAAc,KACZV,iBAAmB3B,EAAE,yBAAyB4B,KAAK,mBACvDvB,aAAasB,sBAmBrB3B,EAAE,iBAAiBmC,GAAG,SAAUT,aAChC1B,EAAE,iBAAiBmC,GAAG,QAAST,aAG/B1B,EAAE,mBAAmBsC,OACjB,WACItC,EAAEgC,MAAMO,KAAK,eAAeC,IAAI,oBAAqB,gBAAoB,aAE7E,WACIxC,EAAEgC,MAAMO,KAAK,eAAeC,IAAI,oBAAqB,SAAa,QAK1ExC,EAAE,0DAA0DyC,OAAM,eAC1Dd,iBAAmB3B,EAAEgC,MAAMJ,KAAK,mBAChCc,KAAO1C,EAAEgC,MAAMO,KAAK,SAASI,OAC7BC,aAAe5C,EAAEgC,MAAMO,KAAK,eAAeI,OAC3CE,QAAU7C,EAAEgC,MAAMc,QAAQ,uBAE9BD,QAAQN,KAAK,0BAA0BlB,KAAKqB,KAAO,gCACnDG,QAAQN,KAAK,gCAAgClB,KAAKuB,cAClDC,QAAQN,KAAK,yBAAyBX,KAAK,kBAAmBD,kBAC9DtB,aAAasB"}
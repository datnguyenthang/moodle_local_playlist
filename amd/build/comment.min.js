define("local_playlist/comment",["jquery","core/ajax","core/templates"],(function($,ajax,templates){return{init:function(){function initEventCommentListeners(){$(".delete-comment").on("click",(function(e){e.preventDefault();var commentid=$(this).data("commentid");ajax.call([{methodname:"local_playlist_delete_comment",args:{commentid:commentid}}])[0].done((function(response){templates.render("local_playlist/details/_comment_list",{comments:response.comments}).done((function(html){$("#comments-list").html(html),initEventCommentListeners()}))})).fail((function(error){console.error("Error deleting comment:",error)}))})),$(".btn-replay").on("click",(function(e){e.preventDefault();var formId=$(this).data("id");$("#"+formId).toggle()})),$(".edit-comment").on("click",(function(e){e.preventDefault();var commentid=$(this).data("commentid");$("#comment-msg-"+commentid).toggle(),$("#edit-comment-form-"+commentid).toggle()})),$("body").on("keydown",".edit-comment-text, .form-comment textarea",(function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),$form=$(this).closest("form").toggle(),$form.find('textarea[name="comment"]').prop("disabled",!0),setTimeout((function(){$form.data("processing",!1)}),1e3),submitCommentForm($form),$form.find('textarea[name="comment"]').val(""))}))}function submitCommentForm($form){var itemid=$form.find('input[name="itemid"]').val(),replyid=$form.find('input[name="replyid"]').val(),commentid=$form.find('input[name="commentid"]').val(),text=$form.find('textarea[name="comment"], textarea[name="editcomment"]').val();""!==$.trim(text)&&ajax.call([{methodname:"local_playlist_set_comment",args:{itemid:itemid,replyid:replyid,commentid:commentid,text:text}}])[0].done((function(response){templates.render("local_playlist/details/_comment_list",{comments:response.comments}).done((function(html){$("#comments-list").html(html),initEventCommentListeners()}))})).fail((function(ex){console.error(ex)}))}initEventCommentListeners(),$("body").on("click","#submitnewcomment",(function(e){e.preventDefault(),$(this).prop("disabled")||($(this).prop("disabled",!0).text("Submitting..."),submitCommentForm($(this).closest("form")),$(this).prop("disabled",!1))}))}}}));

//# sourceMappingURL=comment.min.js.map